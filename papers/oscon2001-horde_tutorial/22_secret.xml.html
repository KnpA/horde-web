<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "DTD/xhtml1-transitional.dtd">
<html>
<head>
<title>Presentations :: Encryption</title>
<link href="presentation.css" rel="stylesheet" type="text/css" />
</head>

<body>
<table class='oratorHeader' border='0' cellspacing='0' cellpadding='1' width='100%'><tr>
<td width='1%' align='left' class='oratorHeaderBack' valign='center' nowrap='nowrap'><a href="21_token.xml.html" onmouseout="status='';" onmouseover="status='Go to Tokens'; return true;"><img src="presentation_back.gif" border="0" alt="" /></a></td><td style="cursor: hand;" onclick="location.href='21_token.xml.html';" align="left" class="oratorHeaderBack" width="24%"><table border="0" cellspacing="0" cellpadding="0"><tr><td nowrap="nowrap"><div class='oratorTitleHigh'>Tokens</div></td></tr></table></td>
<td width='50%' align='center' class='oratorHeaderBack' valign='center' nowrap='nowrap'><table border="0" cellspacing="0" cellpadding="0"><tr><td nowrap="nowrap"><div class='oratorTitle'>Encryption</div></td></tr></table></td>
<td style='cursor: hand;' onclick='location.href="23_auth.xml.html";' width='24%' align='right' class='oratorHeaderBack' valign='center' nowrap='nowrap'><table border="0" cellspacing="0" cellpadding="0"><tr><td nowrap="nowrap"><div class='oratorTitleHigh'>Authentication</div></td></tr></table></td><td width="1%" align="right"><a href="23_auth.xml.html" onmouseout="status='';" onmouseover="status='Go to Authentication'; return true;"><img src="presentation_forward.gif" border="0" alt="" /></a></td>
</tr></table>
<br /><br /><div align='center'>
<table border='0' width='600'><tr><td align='left'>

  <p>Encryption of session information</p>

  <code><font color="#000000">
<br><font color="#0000BB">&lt;?php<br><br></font><font color="#007700">require_once&nbsp;</font><font color="#0000BB">HORDE_BASE&nbsp;</font><font color="#007700">.&nbsp;</font><font color="#DD0000">'/lib/Secret.php'</font><font color="#007700">;<br><br></font><font color="#FF8000">// If we need to set the encryption key, we call:<br></font><font color="#0000BB">Secret</font><font color="#007700">::</font><font color="#0000BB">setKey</font><font color="#007700">(</font><font color="#0000BB">$registry</font><font color="#007700">-&gt;</font><font color="#0000BB">getApp</font><font color="#007700">());<br><br></font><font color="#FF8000">// Get the encryption key:<br></font><font color="#0000BB">$key&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">Secret</font><font color="#007700">::</font><font color="#0000BB">getKey</font><font color="#007700">(</font><font color="#0000BB">$registry</font><font color="#007700">-&gt;</font><font color="#0000BB">getApp</font><font color="#007700">());<br><br></font><font color="#FF8000">// Read some sensitive data<br></font><font color="#0000BB">$data&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">Secret</font><font color="#007700">::</font><font color="#0000BB">read</font><font color="#007700">(</font><font color="#0000BB">$key</font><font color="#007700">,&nbsp;</font><font color="#0000BB">$privateData</font><font color="#007700">);<br><br></font><font color="#FF8000">// Encrypt a new value<br></font><font color="#0000BB">$encrypted&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">Secret</font><font color="#007700">::</font><font color="#0000BB">write</font><font color="#007700">(</font><font color="#0000BB">$key</font><font color="#007700">,&nbsp;</font><font color="#0000BB">$plaintext</font><font color="#007700">);<br><br></font><font color="#0000BB">?&gt;<br></font>&nbsp;&nbsp;</font>
</code><br />


  <ul>
<li>Secret::read() and Secret::write() will use mcrypt if available; otherwise they will use the HCEMD5 module in PEAR.</li><li>The encryption key is stored as a cookie, if possible.</li><li>When the key is a cookie or otherwise not stored on the server, these functions can be used to encrypt data inside session information such that even access to the session store is not enough to gain the information.</li></ul><br />


</td></tr></table></div>
</body>
</html>
