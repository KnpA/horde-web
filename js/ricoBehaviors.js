Rico.selectionSet=function(b,a){new Rico.SelectionSet(b,a)};Rico.SelectionSet=Class.create({initialize:function(c,a){this.options=a||{};if(typeof c=="string"){c=$$(c)}this.previouslySelected=[];this.selectionSet=c;this.selectedClassName=this.options.selectedClass||"selected";this.selectNode=this.options.selectNode||function(d){return d};this.onSelect=this.options.onSelect;this.onFirstSelect=this.options.onFirstSelect;this.clickHandler=this.click.bind(this);c.each(function(d){Event.observe(d,"click",new Rico.EventWrapper(this.clickHandler,d).wrapper)}.bind(this));if(!this.options.noDefault){var b=this.options.cookieName?this.getCookie():0;this.selectIndex(b||this.options.selectedIndex||0)}},getCookie:function(){var b=RicoUtil.getCookie(this.options.cookieName);if(!b){return 0}var a=parseInt(b);return a<this.selectionSet.length?a:0},reset:function(){this.previouslySelected=[];this.notifySelected(this.selected)},select:function(a){if(this.selected==a){return}if(this.selected){Element.removeClassName(this.selectNode(this.selected),this.selectedClassName)}this.notifySelected(a);this.selected=a;Element.addClassName(this.selectNode(this.selected),this.selectedClassName)},notifySelected:function(b){var a=this.selectionSet.indexOf(b);if(this.options.cookieName){RicoUtil.setCookie(this.options.cookieName,a,this.options.cookieDays,this.options.cookiePath,this.options.cookieDomain)}if(this.onFirstSelect&&!this.previouslySelected[a]){this.onFirstSelect(b,a);this.previouslySelected[a]=true}if(this.onSelect){try{this.onSelect(b,a)}catch(c){}}},selectIndex:function(a){this.select(this.selectionSet[a])},nextSelectItem:function(){var a=this.selectionSet.indexOf(this.selected);if(a+1>=this.selectionSet.length){return this.selectionSet[a-1]}else{return this.selectionSet[a+1]}},selectNext:function(){var a=this.selectionSet.indexOf(this.selected);if(a>=this.selectionSet.length){this.selectIndex(a-1)}else{this.selectIndex(a+1)}},click:function(a,b){this.select(b)},add:function(a){if(a.constructur==Array){a.each(function(b){Event.observe(b,"click",new Rico.EventWrapper(this.clickHandler,a).wrapper)}.bind(this))}else{Event.observe(a,"click",new Rico.EventWrapper(this.clickHandler,a).wrapper)}},remove:function(a){this.selectionSet=this.selectionSet.without(a)},removeAll:function(){}});Rico.HoverSet=Class.create({initialize:function(c,a){a=a||[];this.hoverSet=c;this.hoverClassName=a.hoverClass||"hover";this.hoverNodes=a.hoverNodes||function(d){return[d]};this.listenerHover=this._onHover.bind(this);this.listenerEndHover=this._onUnHover.bind(this);for(var b=0;b<this.hoverSet.length;b++){this.add(this.hoverSet[b])}},_onHover:function(a,b){this.hover(b)},_onUnHover:function(a,b){this.unHover(b)},hover:function(a){this.hoverNodes(a).each((function(b){Element.addClassName(b,this.hoverClassName)}).bind(this))},unHover:function(a){this.hoverNodes(a).each((function(b){Element.removeClassName(b,this.hoverClassName)}).bind(this))},add:function(a){Event.observe(a,"mousemove",new Rico.EventWrapper(this.listenerHover,a).wrapper);Event.observe(a,"mouseout",new Rico.EventWrapper(this.listenerEndHover,a).wrapper)}});Rico.Hover={groups:{},clearCurrent:function(a){var b=Rico.Hover.groups[a];if(!b){return}clearTimeout(b[0]);b[1].end();Rico.Hover.groups[a]=null},end:function(a){Rico.Hover.groups[a][1].end()},endWith:function(a,b){var c=setTimeout('Rico.Hover.end("'+b+'")',a.exitDelay);Rico.Hover.groups[b]=[c,a]}};Rico.HoverDisplay=Class.create({initialize:function(b,a){this.element=b;this.options=a||{};this.group=this.options.group;this.exitDelay=this.options.delay||1000},begin:function(){Rico.Hover.clearCurrent(this.group);Element.show(this.element)},end:function(a){if(a){Rico.Hover.endWith(this,this.group)}else{Element.hide(this.element)}}});Rico.EventWrapper=Class.create({initialize:function(a,b){this.handler=a;this.target=b;this.wrapper=this.wrapperCall.bindAsEventListener(this)},wrapperCall:function(a){this.handler(a,this.target)}});Rico.includeLoaded("ricoBehaviors.js");