Rico.animate=function(a){new Rico.Effect.Animator().play(a,arguments[1])};Rico.Effect={};Rico.Effect.easeIn=function(a){return Math.sqrt(a)};Rico.Effect.easeOut=function(a){return a*a};Rico.Stepping={};Rico.Stepping.easeIn=Rico.Effect.easeIn;Rico.Stepping.easeOut=Rico.Effect.easeOut;Rico.Effect.Animator=Class.create({initialize:function(a){this.animateMethod=this.animate.bind(this);this.options=arguments[1]||{};this.stepsLeft=0;if(!a){return}this.reset(a,arguments[1])},reset:function(a){this.effect=a;if(arguments[1]){this.setOptions(arguments[1])}this.stepsLeft=this.options.steps;this.duration=this.options.duration},setOptions:function(a){this.options=Object.extend({steps:10,duration:200,rate:function(b){return b}},a||{})},play:function(a){this.setOptions(arguments[1]);if(a){if(a.step){this.reset(a,arguments[1])}else{$H(a).keys().each((function(c){var b={fadeOut:Rico.Effect.FadeOut}[c];this.reset(new b(a[c]))}).bind(this))}}this.animate()},stop:function(){if(this.timer){clearTimeout(this.timer)}this.stepsLeft=0;if(this.effect&&this.effect.finish){this.effect.finish()}if(this.options.onFinish){this.options.onFinish()}},pause:function(){this.interupt=true},resume:function(){this.interupt=false;if(this.stepsLeft>0){this.animate()}},animate:function(){if(this.interupt){return}if(this.stepsLeft<=0){this.stop();return}if(this.timer){clearTimeout(this.timer)}this.effect.step(this.options.rate(this.stepsLeft));this.startNextStep()},startNextStep:function(){var a=Math.round(this.duration/this.stepsLeft);this.duration-=a;this.stepsLeft--;this.timer=setTimeout(this.animateMethod,a)},isPlaying:function(){return this.stepsLeft!=0&&!this.interupt}});Rico.Effect.Group=Class.create({initialize:function(a){this.effects=a},step:function(a){this.effects.each(function(b){b.step(a)})},finish:function(){this.effects.each(function(a){if(a.finish){a.finish()}})}});Rico.Effect.SizeAndPosition=Class.create({initialize:function(c,a,e,b,d){Object.extend(this,new Rico.Effect.SizeAndPositionFade(c,a,e,b,d))}});Rico.Effect.SizeAndPositionFade=Class.create({initialize:function(c,a,f,b,d,e){this.element=$(c);this.x=typeof(a)=="number"?a:this.element.offsetLeft;this.y=typeof(f)=="number"?f:this.element.offsetTop;if(!Prototype.Browser.IE||(document.compatMode&&document.compatMode.indexOf("CSS")!=-1)){this.pw=RicoUtil.nan2zero(Element.getStyle(this.element,"padding-left"))+RicoUtil.nan2zero(Element.getStyle(this.element,"padding-right"));this.pw+=RicoUtil.nan2zero(Element.getStyle(this.element,"border-left-width"))+RicoUtil.nan2zero(Element.getStyle(this.element,"border-right-width"));this.ph=RicoUtil.nan2zero(Element.getStyle(this.element,"padding-top"))+RicoUtil.nan2zero(Element.getStyle(this.element,"padding-bottom"));this.ph+=RicoUtil.nan2zero(Element.getStyle(this.element,"border-top-width"))+RicoUtil.nan2zero(Element.getStyle(this.element,"border-bottom-width"))}else{this.pw=0;this.ph=0}this.w=typeof(b)=="number"?b:this.element.offsetWidth;this.h=typeof(d)=="number"?d:this.element.offsetHeight;this.opacity=Element.getStyle(this.element,"opacity")||1;this.target=arguments.length>5?Math.min(e,1):this.opacity},step:function(b){var g=this.element.offsetLeft+((this.x-this.element.offsetLeft)/b);var f=this.element.offsetTop+((this.y-this.element.offsetTop)/b);var e=this.element.offsetWidth+((this.w-this.element.offsetWidth)/b)-this.pw;var a=this.element.offsetHeight+((this.h-this.element.offsetHeight)/b)-this.ph;var d=this.element.style;var c=Element.getStyle(this.element,"opacity");var h=c+(this.target-c)/b;Rico.Effect.setOpacity(this.element,Math.min(Math.max(0,h),1));d.left=g+"px";d.top=f+"px";d.width=e+"px";d.height=a+"px"}});Rico.AccordionEffect=Class.create({initialize:function(c,b,a){this.toClose=c;this.toOpen=b;b.style.height="0px";Element.show(b);Element.makeClipping(b);Element.makeClipping(c);Rico.Controls.disableNativeControls(c);this.endHeight=a},step:function(c){var b=Math.max(1,this.toClose.offsetHeight-parseInt((parseInt(this.toClose.offsetHeight,10))/c,10));var d=b+"px";var a=(this.endHeight-b)+"px";this.toClose.style.height=d;this.toOpen.style.height=a},finish:function(){Element.hide(this.toClose);this.toOpen.style.height=this.endHeight+"px";this.toClose.style.height="0px";Element.undoClipping(this.toOpen);Element.undoClipping(this.toClose);Rico.Controls.enableNativeControls(this.toOpen)}});Rico.Effect.SizeFromBottom=Class.create({initialize:function(a,c,b){this.element=$(a);this.y=typeof(c)=="number"?c:this.element.offsetTop;this.h=typeof(b)=="number"?b:this.element.offsetHeight;this.options=arguments[3]||{}},step:function(b){var d=this.element.offsetTop+((this.y-this.element.offsetTop)/b)+"px";var a=this.element.offsetHeight+((this.h-this.element.offsetHeight)/b)+"px";var c=this.element.style;c.height=a;c.top=d}});Rico.Effect.Position=Class.create({initialize:function(b,a,c){this.element=$(b);this.x=typeof(a)=="number"?a:this.element.offsetLeft;this.destTop=typeof(c)=="number"?c:this.element.offsetTop},step:function(a){var d=this.element.offsetLeft+((this.x-this.element.offsetLeft)/a)+"px";var c=this.element.offsetTop+((this.destTop-this.element.offsetTop)/a)+"px";var b=this.element.style;b.left=d;b.top=c}});Rico.Effect.FadeTo=Class.create({initialize:function(a,b){this.element=a;this.opacity=Element.getStyle(this.element,"opacity")||1;this.target=Math.min(b,1)},step:function(b){var a=Element.getStyle(this.element,"opacity");var c=a+(this.target-a)/b;Rico.Effect.setOpacity(this.element,Math.min(Math.max(0,c),1))}});Rico.Effect.FadeOut=Class.create({initialize:function(a){this.effect=new Rico.Effect.FadeTo(a,0)},step:function(a){this.effect.step(a)}});Rico.Effect.FadeIn=Class.create({initialize:function(c){var b=arguments[1]||{};var a=b.startValue||0;Rico.Effect.setOpacity(c,a);this.effect=new Rico.Effect.FadeTo(c,1)},step:function(a){this.effect.step(a)}});Rico.Effect.setOpacity=function(a,b){if(a.setOpacity){a.setOpacity(b)}else{a.style.filter="alpha(opacity="+Math.round(b*100)+")";a.style.opacity=b}};Rico.Effect.SizeFromTop=Class.create({initialize:function(a,c,d,b){this.element=$(a);this.h=typeof(b)=="number"?b:this.element.offsetHeight;this.scrollElement=c;this.options=arguments[4]||{};this.baseHeight=this.options.baseHeight||Math.max(this.h,this.element.offsetHeight)},step:function(c){var d=this.element.offsetHeight+((this.h-this.element.offsetHeight)/c);var b=d+"px";var a=(d-this.baseHeight)+"px";this.scrollElement.style.top=a;this.element.style.height=b}});Rico.Effect.Height=Class.create({initialize:function(a,b){this.element=a;this.endHeight=b},step:function(b){var a;if(this.element.constructor!=Array){a=this.element.offsetHeight+((this.endHeight-this.element.offsetHeight)/b)+"px";this.element.style.height=a}else{a=this.element[0].offsetHeight+((this.endHeight-this.element[0].offsetHeight)/b)+"px";this.element.each(function(c){c.style.height=a})}}});Rico.Effect.SizeWidth=Class.create({initialize:function(a,b){this.element=a;this.endWidth=b},step:function(a){var b=Math.abs(this.endWidth-parseInt(this.element.offsetWidth,10))/(a);this.element.style.width=(this.element.offsetWidth-b)+"px"}});Rico.Controls={editors:[],scrollSelectors:[],disableNativeControls:function(a){Rico.Controls.defaultDisabler.disableNative(a)},enableNativeControls:function(a){Rico.Controls.defaultDisabler.enableNative(a)},prepareForSizing:function(a){Element.makeClipping(a);Rico.Controls.disableNativeControls(a)},resetSizing:function(a){Element.undoClipping(a);Rico.Controls.enableNativeControls(a)},registerScrollSelectors:function(a){a.each(function(b){Rico.Controls.scrollSelectors.push(Rico.selector(b))})}};Rico.Controls.Disabler=Class.create({initialize:function(){this.options=Object.extend({excludeSet:[],hidables:Rico.Controls.editors},arguments[0]||{})},disableNative:function(a){if(!(/Konqueror|Safari|KHTML/.test(navigator.userAgent))){if(!navigator.appVersion.match(/\bMSIE\b/)){this.blockControls(a).each(function(b){Element.makeClipping(b)})}else{this.hidableControls(a).each(function(b){b.disable()})}}},enableNative:function(a){if(!(/Konqueror|Safari|KHTML/.test(navigator.userAgent))){if(!navigator.appVersion.match(/\bMSIE\b/)){this.blockControls(a).each(function(b){Element.undoClipping(b)})}else{this.hidableControls(a).each(function(b){b.enable()})}}},blockControls:function(c){try{var b=[];if(this.options.includeSet){b=this.options.includeSet}else{var a=this.options.includeSelectors||Rico.Controls.scrollSelectors;b=a.map(function(e){return e.findAll(c)}).flatten()}return b.select(function(f){return(Element.getStyle(f,"display")!="none")&&!this.options.excludeSet.include(f)}.bind(this))}catch(d){return[]}},hidableControls:function(a){if(a){return this.options.hidables.select(function(b){return Element.childOf(b,a)})}else{return this.options.hidables}}});Rico.Controls.defaultDisabler=new Rico.Controls.Disabler();Rico.Controls.blankDisabler=new Rico.Controls.Disabler({includeSet:[],hidables:[]});Rico.Controls.HidableInput=Class.create({initialize:function(b,a){this.field=b;this.view=a;this.enable();Rico.Controls.editors.push(this)},enable:function(){Element.hide(this.view);Element.show(this.field)},disable:function(){this.view.value=$F(this.field);if(this.field.offsetWidth>1){this.view.style.width=parseInt(this.field.offsetWidth,10)+"px";Element.hide(this.field);Element.show(this.view)}}});Element.forceRefresh=function(a){try{var c=document.createTextNode(" ");a.appendChild(c);a.removeChild(c)}catch(b){}};Rico.includeLoaded("ricoEffects.js");