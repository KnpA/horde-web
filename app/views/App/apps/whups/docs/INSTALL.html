<div class="document" id="installing-whups-2-0">
<h1 class="title">Installing Whups 2.0</h1>
<table class="docinfo" frame="void" rules="none">
<col class="docinfo-name" />
<col class="docinfo-content" />
<tbody valign="top">
<tr><th class="docinfo-name">Contact:</th>
<td><a class="first last reference external" href="mailto:dev&#64;lists.horde.org">dev&#64;lists.horde.org</a></td></tr>
</tbody>
</table>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="auto-toc simple">
<li><a class="reference internal" href="#prerequisites" id="id1">1&nbsp;&nbsp;&nbsp;Prerequisites</a></li>
<li><a class="reference internal" href="#installing-whups" id="id2">2&nbsp;&nbsp;&nbsp;Installing Whups</a><ul class="auto-toc">
<li><a class="reference internal" href="#installing-with-pear" id="id3">2.1&nbsp;&nbsp;&nbsp;Installing with PEAR</a></li>
<li><a class="reference internal" href="#installing-from-git" id="id4">2.2&nbsp;&nbsp;&nbsp;Installing from Git</a></li>
</ul>
</li>
<li><a class="reference internal" href="#configuring-whups" id="id5">3&nbsp;&nbsp;&nbsp;Configuring Whups</a></li>
<li><a class="reference internal" href="#obtaining-support" id="id6">4&nbsp;&nbsp;&nbsp;Obtaining Support</a></li>
</ul>
</div>
<p>This document contains instructions for installing the Whups web-based
ticket-tracking application on your system.</p>
<p>For information on the capabilities and features of Whups, see the file
<a class="reference external" href="README">README</a> in the top-level directory of the Whups distribution.</p>
<div class="section" id="prerequisites">
<h1><a class="toc-backref" href="#id1">1&nbsp;&nbsp;&nbsp;Prerequisites</a></h1>
<p>To function properly, Whups <strong>requires</strong> the following:</p>
<ol class="arabic">
<li><p class="first">A working Horde installation.</p>
<p>Whups runs within the <a class="reference external" href="http://www.horde.org/apps/horde">Horde Application Framework</a>, a set of common tools
for web applications written in PHP.  You must install Horde before
installing Whups.</p>
<div class="important">
<p class="first admonition-title">Important</p>
<p class="last">Whups 2.0 requires version 4.0+ of the Horde Framework -
earlier versions of Horde will <strong>not</strong> work.</p>
</div>
<div class="important">
<p class="first admonition-title">Important</p>
<p class="last">Be sure to have completed all of the steps in the
<a class="reference external" href="../../horde/docs/INSTALL">horde/docs/INSTALL</a> file for the Horde Framework before
installing Whups. Many of Whups's prerequisites are also
Horde prerequisites. Additionally, many of Whups's optional
features are configured via the Horde install.</p>
</div>
</li>
<li><p class="first">The following PHP capabilities:</p>
<ol class="loweralpha">
<li><p class="first">SQL support</p>
<p>Whups stores its data in an SQL database. Build PHP with whichever SQL
driver you require; see the`horde/docs/INSTALL`_ file for details.</p>
</li>
</ol>
</li>
</ol>
</div>
<div class="section" id="installing-whups">
<h1><a class="toc-backref" href="#id2">2&nbsp;&nbsp;&nbsp;Installing Whups</a></h1>
<p>The <strong>RECOMMENDED</strong> way to install Whups is using the PEAR installer.
Alternatively, if you want to run the latest development code or get the
latest not yet released fixes, you can install Whups from Git.</p>
<div class="section" id="installing-with-pear">
<h2><a class="toc-backref" href="#id3">2.1&nbsp;&nbsp;&nbsp;Installing with PEAR</a></h2>
<p>First follow the instructions in <a class="reference external" href="../../horde/docs/INSTALL">horde/docs/INSTALL</a> to prepare a PEAR
environment for Horde and install the Horde Framework.</p>
<p>When installing Whups through PEAR now, the installer will automatically
install any dependencies of Whups too. If you want to install Whups with all
optional dependencies, but without the binary PECL packages that need to be
compiled, specify both the <tt class="docutils literal"><span class="pre">-a</span></tt> and the <tt class="docutils literal"><span class="pre">-B</span></tt> flag:</p>
<pre class="literal-block">
pear install -a -B horde/whups
</pre>
<p>By default, only the required dependencies will be installed:</p>
<pre class="literal-block">
pear install horde/whups
</pre>
<p>If you want to install Whups even with all binary dependencies, you need to
remove the <tt class="docutils literal"><span class="pre">-B</span></tt> flag. Please note that this might also try to install PHP
extensions through PECL that might need further configuration or activation in
your PHP configuration:</p>
<pre class="literal-block">
pear install -a horde/whups
</pre>
</div>
<div class="section" id="installing-from-git">
<h2><a class="toc-backref" href="#id4">2.2&nbsp;&nbsp;&nbsp;Installing from Git</a></h2>
<p>See:</p>
<pre class="literal-block">
http://horde.org/source/git.php
</pre>
</div>
</div>
<div class="section" id="configuring-whups">
<h1><a class="toc-backref" href="#id5">3&nbsp;&nbsp;&nbsp;Configuring Whups</a></h1>
<ol class="arabic">
<li><p class="first">Configuring Whups</p>
<p>You must login to Horde as a Horde Administrator to finish the
configuration of Whups. Use the Horde <tt class="docutils literal">Administration</tt> menu item to get
to the administration page, and then click on the <tt class="docutils literal">Configuration</tt> icon to
get the configuration page. Select <tt class="docutils literal">Tickets</tt> from the selection list of
applications. Fill in or change any configuration values as needed. When
done click on <tt class="docutils literal">Generate Tickets Configuration</tt> to generate the
<tt class="docutils literal">conf.php</tt> file. If your web server doesn't have write permissions to the
Whups configuration directory or file, it will not be able to write the
file. In this case, go back to <tt class="docutils literal">Configuration</tt> and choose one of the
other methods to create the configuration file <tt class="docutils literal">whups/config/conf.php</tt>.</p>
<p>Documentation on the format and purpose of the other configuration files and
templates in the <tt class="docutils literal">config/</tt> directory can be found in each file. You may
create <tt class="docutils literal">*.local.php</tt> versions of these files if you wish to customize
Whups' appearance and behavior. See the header of the configuration files
for details and examples. With one exception (<tt class="docutils literal">reminders.php</tt>, in case you
want to automatically sent out reminders about open tickets) the defaults
will be correct for most sites.</p>
<p>The <tt class="docutils literal">*_email.plain.php</tt> files define how outgoing email notifications
about ticket changes look like. See the comments in these files for details.</p>
<p>If you would like the ability to create and update tickets via email, you
will need to set up <tt class="docutils literal"><span class="pre">whups-mail-filter</span></tt> to receive email from the
appropriate addresses. This script takes a number of arguments; see the
script for more details. A typical setup might be:</p>
<pre class="literal-block">
bugs |/usr/bin/whups-mail-filter --queue-name=Bugs
</pre>
<p>This will take in mail to the <tt class="docutils literal">bugs</tt> address at your domain, and create
new tickets in the <tt class="docutils literal">Bugs</tt> queue, with the default type, state and priority
of this queue. If an email references an existing ticket (ticket numbers are
recognized in the subject line) it will be updated instead.</p>
<p>If not installing Whups through PEAR of if PEAR's <tt class="docutils literal">bin_dir</tt> configuration
doesn't point to <tt class="docutils literal">/usr/bin/</tt>, replace <tt class="docutils literal"><span class="pre">/usr/bin/whups-mail-filter</span></tt> with
the path to the <tt class="docutils literal"><span class="pre">whups-mail-filter</span></tt> script in your Horde installation.</p>
<p>See also <a href="#id7"><span class="problematic" id="id8">`Creating tickets from email messages`_</span></a> below.</p>
</li>
<li><p class="first">Creating the database table</p>
<p>Once you finished the configuration in the previous step, you can create all
database tables by clicking the <tt class="docutils literal">DB schema is out of date.</tt> link in the
Whups row of the configuration screen.</p>
<p>Alternatively creating the Whups database tables can be accomplished with
horde's <tt class="docutils literal"><span class="pre">horde-db-migrate</span></tt> utility.  If your database is properly setup in
the Horde configuration, just run the following:</p>
<pre class="literal-block">
horde-db-migrate whups
</pre>
</li>
<li><p class="first">Testing Whups</p>
<p>Use Whups to create your base data, create tickets, and modify tickets. Test
at least the following:</p>
<blockquote>
<ul class="simple">
<li>Creating a new project (queue)</li>
<li>Creating ticket types, states, priorities for a project</li>
<li>Adding a ticket</li>
<li>Assigning a ticket</li>
<li>Closing a ticket</li>
</ul>
</blockquote>
</li>
<li><p class="first">Creating tickets from email messages</p>
<p>Whups provides functionality that can be used to create and update tickets
from email messages. One part of this functionality is the
<tt class="docutils literal"><span class="pre">whups-mail-filter</span></tt> script. It can either be installed inside the mail
chain, or run as a standalone script against an IMAP or POP3 server. It
provides a list of all available command line arguments if called with the
<tt class="docutils literal"><span class="pre">--help</span></tt> argument: <tt class="docutils literal"><span class="pre">whups-mail-filter</span> <span class="pre">--help</span></tt>.</p>
<p>If you use the arguments starting with <tt class="docutils literal"><span class="pre">--mail</span></tt>, the script will login to
the provided IMAP or POP3 server and process all messages in the specified
folder. Any successfully processed messages will be deleted. An error
message will be displayed for any failed messages. Using the script in this
mode makes most sense when run regularly, e.g. by a cron job or the Windows
task planner.</p>
<p>You can also install the script inside the mail chain. In this mode, the
script expects a single email message from standard input. A common
scenario would be to pipe all messages to a certain email address through
this script, e.g. through the forwarding or alias mechanism. An example
entry in <tt class="docutils literal">/etc/alias</tt> could look like this:</p>
<pre class="literal-block">
bugs:&quot;|/usr/bin/whups-mail-filter -q 'Test Queue'&quot;
</pre>
<p>Even though this example uses a queue &quot;name&quot; for the argument, it's
preferred to use IDs, because those doesn't cause any problems with spaces,
or non-ascii characters.</p>
<p>The script tries to determine the ticket number from the message, if a
ticket number hasn't been specified with the <tt class="docutils literal"><span class="pre">--ticket</span></tt> argument.
Currently it searches for strings looking like &quot;[Bug #1]&quot; in the message
subject. If a ticket number cannot be determined by any means, or if a
ticket with that number doesn't exist, a new ticket is created.</p>
<p>The (Horde) user that will be used to create or update the ticket, will
also be determined by investigating the message. The email address used in
the <tt class="docutils literal">From:</tt> header of the message will be looked up by searching all
identities of all users in the authentication backend. This only works if
the authentication backend is capable of listing users. If a user cannot be
determined this way, the user provided by the <tt class="docutils literal"><span class="pre">--default--auth</span></tt> argument,
if any, is used. Finally, if none has been provided, the user specified in
Whups' configuration (<tt class="docutils literal"><span class="pre">$conf[mail][username]</span></tt>) will be used. If there
still hasn't been a user determined at this point, the ticket will be
updated or created by the &quot;guest&quot; user, using the email address of the
<tt class="docutils literal">From:</tt> header. This only works if guest access has been granted to both
Whups, and the queue specified with the <tt class="docutils literal"><span class="pre">--queue-name</span></tt> or <tt class="docutils literal"><span class="pre">--queue-id</span></tt>
parameters.</p>
<p>Finally, you might want to to enable the setting in Whups' configuration,
below the &quot;Email Settings&quot; tab, that allows users to reply to ticket
emails. This setting removes the warning from the generated ticket emails to
<em>not</em> reply to those emails. And you should of course make sure that you
specify the correct email address here for the generated messages. It should
be the address that you use for the mail pipe, or the IMAP/POP3 account when
calling <tt class="docutils literal"><span class="pre">whups-mail-filter</span></tt>.</p>
<p>Any attachments that have been sent with the message will be added to the
ticket as attachments too. This is done via the virtual file system (VFS) of
Horde. If you use the local file system as the VFS backend, you need to take
care of permissions and umasks, i.e. both the user running the
<tt class="docutils literal"><span class="pre">whups-mail-filter</span></tt> script and the user running the web server need to
have read-write permissions to the VFS storage directory.</p>
</li>
</ol>
</div>
<div class="section" id="obtaining-support">
<h1><a class="toc-backref" href="#id6">4&nbsp;&nbsp;&nbsp;Obtaining Support</a></h1>
<p>If you encounter problems with Whups, help is available!</p>
<p>The Horde Frequently Asked Questions List (FAQ), available on the Web at</p>
<blockquote>
<a class="reference external" href="http://wiki.horde.org/FAQ">http://wiki.horde.org/FAQ</a></blockquote>
<p>The Horde Project runs a number of mailing lists, for individual applications
and for issues relating to the project as a whole. Information, archives, and
subscription information can be found at</p>
<blockquote>
<a class="reference external" href="http://www.horde.org/community/mail">http://www.horde.org/community/mail</a></blockquote>
<p>Lastly, Horde developers, contributors and users may also be found on IRC,
on the channel #horde on the Freenode Network (irc.freenode.net).</p>
<p>Please keep in mind that Whups is free software written by volunteers.
For information on reasonable support expectations, please read</p>
<blockquote>
<a class="reference external" href="http://www.horde.org/community/support">http://www.horde.org/community/support</a></blockquote>
<p>Thanks for using Whups!</p>
<p>The Whups team</p>
</div>
<div class="system-messages section">
<h1>Docutils System Messages</h1>
<div class="system-message" id="id7">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">/horde/checkout/horde.git/whups/docs/INSTALL</tt>, line 129); <em><a href="#id8">backlink</a></em></p>
Unknown target name: &quot;creating tickets from email messages&quot;.</div>
</div>
</div>
