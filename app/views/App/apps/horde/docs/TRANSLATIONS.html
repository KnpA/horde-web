<div class="document" id="horde-translation-guide">
<h1 class="title">Horde Translation Guide</h1>
<table class="docinfo" frame="void" rules="none">
<col class="docinfo-name" />
<col class="docinfo-content" />
<tbody valign="top">
<tr class="field"><th class="docinfo-name">Last update:</th><td class="field-body">2009-10-28</td>
</tr>
<tr><th class="docinfo-name">Revision:</th>
<td>1.8.10.5</td></tr>
<tr><th class="docinfo-name">Author:</th>
<td>Joris Braakman &lt;<a class="reference external" href="mailto:jbraakman&#64;yahoo.com">jbraakman&#64;yahoo.com</a>&gt;</td></tr>
<tr><th class="docinfo-name">Author:</th>
<td>Chuck Hagenbuch &lt;<a class="reference external" href="mailto:chuck&#64;horde.org">chuck&#64;horde.org</a>&gt;</td></tr>
<tr><th class="docinfo-name">Author:</th>
<td>Jan Schneider &lt;<a class="reference external" href="mailto:jan&#64;horde.org">jan&#64;horde.org</a>&gt;</td></tr>
<tr><th class="docinfo-name">Contact:</th>
<td><a class="first last reference external" href="mailto:horde&#64;lists.horde.org">horde&#64;lists.horde.org</a></td></tr>
</tbody>
</table>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#gnu-gettext-php-and-horde" id="id1">GNU gettext, PHP and Horde</a></li>
<li><a class="reference internal" href="#translations-don-t-work" id="id2">Translations don't work</a></li>
<li><a class="reference internal" href="#solaris" id="id3">Solaris</a></li>
<li><a class="reference internal" href="#freebsd" id="id4">FreeBSD</a></li>
</ul>
</div>
<div class="section" id="gnu-gettext-php-and-horde">
<h1><a class="toc-backref" href="#id1">GNU gettext, PHP and Horde</a></h1>
<p>Horde uses GNU gettext for internationalization (i18n) and localization
(l10n).  The manual at <a class="reference external" href="http://www.gnu.org/software/gettext/manual/gettext.html">http://www.gnu.org/software/gettext/manual/gettext.html</a>
is biased against C and using Emacs.  This is more for Horde.</p>
<p>There is a good explanation for PHP and gettext at:
<a class="reference external" href="http://www.faqts.com/knowledge-base/view.phtml/aid/2953/fid/422">http://www.faqts.com/knowledge-base/view.phtml/aid/2953/fid/422</a></p>
<p>People seem to like learning from examples better, so I have used dutch
(nl_NL) as an example everywhere.</p>
<p>There is a command line tool written in PHP for creating and managing
translations in the <tt class="docutils literal">horde/po/</tt> directory.  Usage instructions can be found
in <tt class="docutils literal">horde/po/README</tt> as well as instructions on how to start and maintain
translations.</p>
</div>
<div class="section" id="translations-don-t-work">
<h1><a class="toc-backref" href="#id2">Translations don't work</a></h1>
<p>If all or some translations don't work on your system, please follow the steps
described below.  If you want to ask for help either on the <a class="reference external" href="http://www.horde.org/mail/">i18n mailing
list</a> or on <a class="reference external" href="http://bugs.horde.org">Horde's bug system</a>, please explain which steps you tried and
which failed.</p>
<p>You might also find some more information in the <a class="reference external" href="http://www.horde.org/faq/">FAQ</a>.</p>
<p>Please note that Dutch (nl_NL) is only used as an example here.  If you have
problems with a certain translation use this translation's language code
instead.</p>
<ol class="arabic">
<li><p class="first">Is this locale (nl_NL) installed at all?</p>
<p><tt class="docutils literal">locale <span class="pre">-a</span></tt> should list all locales installed on your system.</p>
<p>On Debian and Ubuntu not all locales may be enabled by default. On Debian
edit <tt class="docutils literal">/etc/locale.gen</tt> and run <tt class="docutils literal"><span class="pre">locale-gen</span></tt> after you changed the list
of enabled locales. On Ubuntu run <tt class="docutils literal"><span class="pre">locale-gen</span> nl_NL</tt> for all locales that
you want to install.</p>
</li>
<li><p class="first">Do you have any .mo files?</p>
<p>Usually in <tt class="docutils literal">/usr/share/locale/</tt>
e.g. <tt class="docutils literal">/usr/share/locale/nl/LC_MESSAGES/tar.mo</tt></p>
</li>
<li><p class="first">Does gettext even work?</p>
<p>Get a string to translate:</p>
<pre class="literal-block">
$ strings /bin/tar | grep Memory
Memory exhausted
$ (LANG=nl_NL; LANGUAGE=nl_NL; LC_MESSAGES=nl_NL; gettext tar &quot;Memory exhausted&quot; )
Geheugen uitgeput
</pre>
</li>
<li><p class="first">Does the local Horde file work?</p>
<p>Assuming that you have put the translated Horde file in
<tt class="docutils literal">/data/www/horde/locale/nl_NL/LC_MESSAGES/horde.mo</tt>:</p>
<pre class="literal-block">
$ export TEXTDOMAINDIR=/data/www/horde/locale
$ (LANG=nl_NL; LANGUAGE=nl_NL; LC_MESSAGES=nl_NL; gettext horde &quot;Message&quot; )
Bericht
</pre>
<p>Create a file in the horde directory, langtest.php:</p>
<pre class="literal-block">
&lt;?php

setlocale(LC_MESSAGES, 'nl_NL');
putenv('LANG=nl_NL');
putenv('LANGUAGE=nl_NL');
// use the tar test.
echo dgettext('tar', 'Memory exhausted');
echo '&lt;br /&gt;';

// Specify location of translation tables
bindtextdomain('horde', './locale');

// Choose domain
textdomain('horde');

// Print the already tested message
echo _(&quot;Message&quot;);
echo '&lt;br /&gt;';

// this should print the same.
echo dgettext('horde', 'Message');

?&gt;
</pre>
<p>Output web browser:</p>
<pre class="literal-block">
Geheugen uitgeput
Bericht
Bericht
</pre>
</li>
</ol>
</div>
<div class="section" id="solaris">
<h1><a class="toc-backref" href="#id3">Solaris</a></h1>
<p>Since the .mo files are binary, they are platform specific.  You have to rerun
make in all po directories.</p>
<p>On Solaris 7, you don't have the <tt class="docutils literal">Partial Locales (SUNWploc)</tt> and
<tt class="docutils literal">Supplementary Partial Locales (SUNWploc1)</tt> packages installed if you get:</p>
<pre class="literal-block">
$ LANG=nl_NL
couldn't set locale correctly
</pre>
<p>On Solaris 8, you must install the local packages required for the locales you
desire (for example, you may need to install <tt class="docutils literal">SUNWweuos</tt> for Western
European locales or <tt class="docutils literal">SUNWmeaos</tt> for Middle Eastern locales).  The packages
are located on Software Disk 1 of 2 in the directory:
<tt class="docutils literal">sol_8_1001_sparc/s0/Solaris_8/Product</tt></p>
<p>This is what it should say:</p>
<p>Solaris 7:</p>
<pre class="literal-block">
$ pkginfo | grep ploc
system      SUNWploc       Partial Locales
system      SUNWploc1      Supplementary Partial Locales
</pre>
<p>Solaris 8:</p>
<pre class="literal-block">
$ pkginfo | grep euo
system      SUNWceuos      Central Europe OS Support
system      SUNWceuox      Central Europe 64-bit OS Support
system      SUNWeeuos      Eastern Europe OS Support
system      SUNWeeuox      Eastern Europe 64-bit OS Support
system      SUNWneuos      Northern Europe OS Support
system      SUNWneuox      Northern Europe 64-bit OS Support
system      SUNWseuos      Southern Europe OS Support
system      SUNWseuox      Southern Europe 64-bit OS Support
system      SUNWweuos      Western Europe OS Support
system      SUNWweuox      Western Europe 64-bit OS Support
</pre>
<p>The stuff is installed in <tt class="docutils literal">/usr/lib/locale</tt>:</p>
<pre class="literal-block">
$ ls /usr/lib/locale/nl
LC_COLLATE   LC_CTYPE     LC_MESSAGES  LC_MONETARY  LC_NUMERIC   LC_TIME      nl.so.1
</pre>
<p>It was reported that the HTTP server has to be linked to the same libintl.so
file as PHP on Solaris.  Also, it may be required that libintl.so be loaded
before libc is loaded.  If you are having conflicts, you may be able to reside
them by starting apache with one of the following commands:</p>
<pre class="literal-block">
$ LD_PRELOAD=libintl.so apachectl start
</pre>
</div>
<div class="section" id="freebsd">
<h1><a class="toc-backref" href="#id4">FreeBSD</a></h1>
<p>To enable UTF-8 support in Horde, you also need UTF-8 support in
FreeBSD.  This is not installed by default, you need to install the
<tt class="docutils literal"><span class="pre">utf8locale-without-swidth-040319</span></tt> package or port.</p>
</div>
</div>
<div class="footer">
<hr class="footer" />
<a class="reference external" href="http://cvs.horde.org/co.php/horde/docs/TRANSLATIONS?onb=FRAMEWORK_3">View document source</a>.
Generated by <a class="reference external" href="http://docutils.sourceforge.net/">Docutils</a> from <a class="reference external" href="http://docutils.sourceforge.net/rst.html">reStructuredText</a> source.

</div>
