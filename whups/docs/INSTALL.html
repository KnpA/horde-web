<div class="document" id="installing-whups-1-0">
<h1 class="title">Installing Whups 1.0</h1>
<table class="docinfo" frame="void" rules="none">
<col class="docinfo-name" />
<col class="docinfo-content" />
<tbody valign="top">
<tr class="field"><th class="docinfo-name">Last update:</th><td class="field-body">2008-08-28</td>
</tr>
<tr><th class="docinfo-name">Revision:</th>
<td>1.25</td></tr>
<tr><th class="docinfo-name">Contact:</th>
<td><a class="first last reference" href="mailto:dev&#64;lists.horde.org">dev&#64;lists.horde.org</a></td></tr>
</tbody>
</table>
<div class="contents topic" id="contents">
<p class="topic-title first"><a name="contents">Contents</a></p>
<ul class="auto-toc simple">
<li><a class="reference" href="#obtaining-whups" id="id1" name="id1">1&nbsp;&nbsp;&nbsp;Obtaining Whups</a></li>
<li><a class="reference" href="#prerequisites" id="id2" name="id2">2&nbsp;&nbsp;&nbsp;Prerequisites</a></li>
<li><a class="reference" href="#installing-whups" id="id3" name="id3">3&nbsp;&nbsp;&nbsp;Installing Whups</a></li>
<li><a class="reference" href="#configuring-whups" id="id4" name="id4">4&nbsp;&nbsp;&nbsp;Configuring Whups</a></li>
<li><a class="reference" href="#obtaining-support" id="id5" name="id5">5&nbsp;&nbsp;&nbsp;Obtaining Support</a></li>
</ul>
</div>
<p>This document contains instructions for installing the Whups web-based
ticket-tracking application on your system.</p>
<p>For information on the capabilities and features of Whups, see the file
<a class="reference" href="?f=README.html">README</a> in the top-level directory of the Whups distribution.</p>
<div class="section" id="obtaining-whups">
<h1><a class="toc-backref" href="#id1" name="obtaining-whups">1&nbsp;&nbsp;&nbsp;Obtaining Whups</a></h1>
<p>Whups can be obtained from the Horde website and FTP server, at</p>
<blockquote>
<p><a class="reference" href="http://www.horde.org/whups/">http://www.horde.org/whups/</a></p>
<p><a class="reference" href="ftp://ftp.horde.org/pub/whups/">ftp://ftp.horde.org/pub/whups/</a></p>
</blockquote>
<p>Or use the mirror closest to you:</p>
<blockquote>
<a class="reference" href="http://www.horde.org/mirrors.php">http://www.horde.org/mirrors.php</a></blockquote>
<p>Bleeding-edge development versions of Whups are available via CVS; see the
file <a class="reference" href="../../horde/docs/?f=HACKING.html">horde/docs/HACKING</a> in the Horde distribution, or the website
<a class="reference" href="http://www.horde.org/source/">http://www.horde.org/source/</a>, for information on accessing the Horde CVS
repository.</p>
</div>
<div class="section" id="prerequisites">
<h1><a class="toc-backref" href="#id2" name="prerequisites">2&nbsp;&nbsp;&nbsp;Prerequisites</a></h1>
<p>To function properly, Whups <strong>requires</strong> the following:</p>
<ol class="arabic">
<li><p class="first">A working Horde installation.</p>
<p>Whups runs within the <a class="reference" href="http://www.horde.org/horde/">Horde Application Framework</a>, a set of common
tools for Web applications written in PHP.  You must install Horde before
installing Whups.</p>
<div class="important">
<p class="first admonition-title">Important</p>
<p class="last">Whups 1.0 requires version 3.2+ of the Horde Framework -
earlier versions of Horde will <strong>not</strong> work.</p>
</div>
<p>The Horde Framework can be obtained from the Horde website and FTP server,
at</p>
<blockquote>
<p><a class="reference" href="http://www.horde.org/horde/">http://www.horde.org/horde/</a></p>
<p><a class="reference" href="ftp://ftp.horde.org/pub/horde/">ftp://ftp.horde.org/pub/horde/</a></p>
</blockquote>
<p>Many of Whups's prerequisites are also Horde prerequisites.</p>
<div class="important">
<p class="first admonition-title">Important</p>
<p class="last">Be sure to have completed all of the steps in the
<a class="reference" href="../../horde/docs/?f=INSTALL.html">horde/docs/INSTALL</a> file for the Horde Framework before
installing Whups.</p>
</div>
</li>
<li><p class="first">The following PHP capabilities:</p>
<ol class="loweralpha">
<li><p class="first">SQL support</p>
<p>Whups stores its data in an SQL database. Build PHP with whichever SQL
driver you require; see the`horde/docs/INSTALL`_ file for details.</p>
</li>
</ol>
</li>
</ol>
</div>
<div class="section" id="installing-whups">
<h1><a class="toc-backref" href="#id3" name="installing-whups">3&nbsp;&nbsp;&nbsp;Installing Whups</a></h1>
<p>Whups is written in PHP, and must be installed in a web-accessible directory.
The precise location of this directory will differ from system to system.
Conventionally, Whups is installed directly underneath Horde in the web
server's document tree.</p>
<p>Since Whups is written in PHP, there is no compilation necessary; simply
expand the distribution where you want it to reside and rename the root
directory of the distribution to whatever you wish to appear in the URL. For
example, with the Apache web server's default document root of
<tt class="docutils literal"><span class="pre">/usr/local/apache/htdocs</span></tt>, you would type:</p>
<pre class="literal-block">
cd /usr/local/apache/htdocs/horde
tar zxvf /path/to/whups-h3-x.y.z.tar.gz
mv whups-h3-x.y.z whups
</pre>
<p>and would then find Whups at the URL:</p>
<pre class="literal-block">
http://your-server/horde/whups/
</pre>
</div>
<div class="section" id="configuring-whups">
<h1><a class="toc-backref" href="#id4" name="configuring-whups">4&nbsp;&nbsp;&nbsp;Configuring Whups</a></h1>
<ol class="arabic">
<li><p class="first">Configuring Horde for Whups</p>
<ol class="loweralpha">
<li><p class="first">Register the application</p>
<p>In <tt class="docutils literal"><span class="pre">horde/config/registry.php</span></tt>, find the <tt class="docutils literal"><span class="pre">applications['whups']</span></tt>
stanza. The default settings here should be okay, but you can change
them if desired. If you have changed the location of Whups relative to
Horde, either in the URL, in the filesystem or both, you must update the
<tt class="docutils literal"><span class="pre">fileroot</span></tt> and <tt class="docutils literal"><span class="pre">webroot</span></tt> settings to their correct values.</p>
</li>
</ol>
</li>
<li><p class="first">Creating the database table</p>
<p>The specific steps to create the Whups database table depend on which
database you've chosen to use.</p>
<p>First, look in <tt class="docutils literal"><span class="pre">scripts/drivers/</span></tt> to see if a script already exists for
your database type. If so, you should be able to simply execute that script
as superuser in your database.</p>
<p>If such a script does not exist, you'll need to build your own, using the
file <tt class="docutils literal"><span class="pre">whups.sql</span></tt> as a starting point. If you need assistance in creating
databases, you may wish to let us know on the Whups mailing list.</p>
</li>
<li><p class="first">Configuring Whups</p>
<p>To configure Whups, change to the <tt class="docutils literal"><span class="pre">config/</span></tt> directory of the installed
distribution, and make copies of all of the configuration <tt class="docutils literal"><span class="pre">dist</span></tt> files
without the <tt class="docutils literal"><span class="pre">dist</span></tt> suffix:</p>
<pre class="literal-block">
cd config/
for foo in *.dist; do cp $foo `basename $foo .dist`; done
</pre>
<p>Or on Windows:</p>
<pre class="literal-block">
copy *.dist *.
</pre>
<p>Documentation on the format and purpose of those files can be found in each
file. You may edit these files if you wish to customize Whups's appearance
and behavior. With one exception (<tt class="docutils literal"><span class="pre">reminders.php</span></tt>, in case you want to
automatically sent out reminders about open tickets) the defaults will be
correct for most sites.</p>
<p>The <tt class="docutils literal"><span class="pre">create_email.txt</span></tt> and <tt class="docutils literal"><span class="pre">notify_email.txt</span></tt> files define how outgoing
email notifications about new respectively updated tickets look like. If
using non-ascii character in this file, it has to saved with UTF-8
encoding. The following placeholders are available:</p>
<blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">&#64;&#64;ticket_url&#64;&#64;:</th><td class="field-body"><p class="first last">The link to the ticket page.</p>
</td>
</tr>
<tr class="field"><th class="field-name">&#64;&#64;table&#64;&#64;:</th><td class="field-body"><p class="first last">The ticket summary table.</p>
</td>
</tr>
<tr class="field"><th class="field-name">&#64;&#64;comment&#64;&#64;:</th><td class="field-body"><p class="first last">The last user comment if any, including leading
linebreaks.</p>
</td>
</tr>
<tr class="field"><th class="field-name">&#64;&#64;dont_reply&#64;&#64;:</th><td class="field-body"><p class="first last">The message telling users to not reply, if enabled in
the configuration, including trailing line breaks.</p>
</td>
</tr>
<tr class="field"><th class="field-name">&#64;&#64;date&#64;&#64;:</th><td class="field-body"><p class="first last">The current date.</p>
</td>
</tr>
<tr class="field"><th class="field-name">&#64;&#64;full_name&#64;&#64;:</th><td class="field-body"><p class="first last">The full name of the notification recipient.</p>
</td>
</tr>
<tr class="field"><th class="field-name">&#64;&#64;auth_name&#64;&#64;:</th><td class="field-body"><p class="first last">The full name of the user that updated the ticket.</p>
</td>
</tr>
</tbody>
</table>
</blockquote>
<p>You can also specify queue-specific notification messages by creating
seperate files with the following naming convention: <tt class="docutils literal"><span class="pre">create_email_X.txt</span></tt>
will be used for ticket creation emails for queue &quot;X&quot;;
<tt class="docutils literal"><span class="pre">notify_email_Y.txt</span></tt> will be used for notification emails for queue &quot;Y&quot;.</p>
<p>You must login to Horde as a Horde Administrator to finish the
configuration of Whups. Use the Horde <tt class="docutils literal"><span class="pre">Administration</span></tt> menu item to get
to the administration page, and then click on the <tt class="docutils literal"><span class="pre">Configuration</span></tt> icon to
get the configuration page. Select <tt class="docutils literal"><span class="pre">Tickets</span></tt> from the selection list of
applications. Fill in or change any configuration values as needed. When
done click on <tt class="docutils literal"><span class="pre">Generate</span> <span class="pre">Tickets</span> <span class="pre">Configuration</span></tt> to generate the
<tt class="docutils literal"><span class="pre">conf.php</span></tt> file. If your web server doesn't have write permissions to the
Whups configuration directory or file, it will not be able to write the
file. In this case, go back to <tt class="docutils literal"><span class="pre">Configuration</span></tt> and choose one of the
other methods to create the configuration file <tt class="docutils literal"><span class="pre">whups/config/conf.php</span></tt>.</p>
<p>If you would like the ability to create and update tickets via
email, you will need to set up <tt class="docutils literal"><span class="pre">whups/scripts/mail-filter.php</span></tt> to
receive email from the appropriate addresses. This script takes a
number of arguments; see the script for more details. A typical
setup might be:</p>
<pre class="literal-block">
bugs |/path/to/horde/whups/scripts/mail-filter.php --queue-name=Bugs --type-name=Bug --state-name=New --priority-name=Low
</pre>
<p>This will take in mail to the <tt class="docutils literal"><span class="pre">bugs</span></tt> address at your domain, and
create new tickets in the <tt class="docutils literal"><span class="pre">Bugs</span></tt> queue, with a type of <tt class="docutils literal"><span class="pre">Bug</span></tt>, a
state of <tt class="docutils literal"><span class="pre">New</span></tt>, and <tt class="docutils literal"><span class="pre">Low</span></tt> priority. Note that this must be a
valid combination of queue/type/state/priority names in your Whups
installation. If an email references an existing ticket (ticket
numbers are recognized in the subject line) it will be updated
instead.</p>
<p>Note for international users: Whups uses GNU gettext to provide local
translations of text displayed by applications; the translations are found
in the <tt class="docutils literal"><span class="pre">po/</span></tt> directory. If a translation is not yet available for your
locale (and you wish to create one), see the <tt class="docutils literal"><span class="pre">horde/po/README</span></tt> file, or
if you're having trouble using a provided translation, please see the
<a class="reference" href="../../horde/docs/?f=TRANSLATIONS.html">horde/docs/TRANSLATIONS</a> file for instructions.</p>
</li>
<li><p class="first">Testing Whups</p>
<p>Use Whups to create your base data, create tickets, and modify
tickets. Test at least the following:</p>
<blockquote>
<ul class="simple">
<li>Creating a new project (queue)</li>
<li>Creating ticket types, states, priorities for a project</li>
<li>Adding a ticket</li>
<li>Assigning a ticket</li>
<li>Closing a ticket</li>
</ul>
</blockquote>
</li>
<li><p class="first">Creating tickets from email messages</p>
<p>Whups provides functionality that can be used to create and update tickets
from email messages. One part of this functionality is the
<tt class="docutils literal"><span class="pre">mail-filter.php</span></tt> in the <tt class="docutils literal"><span class="pre">whups/scripts/</span></tt> directory. It can either be
installed inside the mail chain, or run as a standalone script against an
IMAP or POP3 server. It provides a list of all available command line
arguments if called with the <tt class="docutils literal"><span class="pre">--help</span></tt> argument: <tt class="docutils literal"><span class="pre">./mail-filter.php</span>
<span class="pre">--help</span></tt>.</p>
<p>If you use the arguments starting with <tt class="docutils literal"><span class="pre">--mail</span></tt>, the script will login to
the provided IMAP or POP3 server and process all messages in the specified
folder. Any successfully processed messages will be deleted. An error
message will be displayed for any failed messages. Using the script in this
mode makes most sense when run regularly, e.g. by a cron job or the Windows
task planner.</p>
<p>You can also install the script inside the mail chain. In this mode, the
script expects a single email message from standard input. A common
scenario would be to pipe all messages to a certain email address through
this script, e.g. through the forwarding or alias mechanism. An example
entry in <tt class="docutils literal"><span class="pre">/etc/alias</span></tt> could look like this:</p>
<pre class="literal-block">
bugs:&quot;|/pathtohorde/whups/scripts/mail-filter.php -q 'Test Queue' -t mytype -p '1. Low' -s Unconfirmed&quot;
</pre>
<p>Even though this example uses &quot;names&quot; for the arguments, it's preferred to
use IDs, because those doesn't cause any problems with spaces, or non-ascii
characters.</p>
<p>The script tries to determine the ticket number from the message, if a
ticket number hasn't been specified with the <tt class="docutils literal"><span class="pre">--ticket</span></tt>
argument. Currently it searches for strings looking like &quot;[Bug #1]&quot; in the
message subject. If a ticket number cannot be determined by any means, or
if a ticket with that number doesn't exist, a new ticket is created.</p>
<p>The (Horde) user that will be used to create or update the ticket, will
also be determined by investigating the message. The email address used in
the <tt class="docutils literal"><span class="pre">From:</span></tt> header of the message will be looked up by searching all
identities of all users in the authentication backend. This only works if
the authentication backend is capable of listing users. If a user cannot be
determined this way, the user provided by the <tt class="docutils literal"><span class="pre">--default--auth</span></tt> argument,
if any, is used. Finally, if none has been provided, the user specified in
Whups' configuration (<tt class="docutils literal"><span class="pre">$conf[mail][username]</span></tt>) will be used. If there
still hasn't been a user determined at this point, the ticket will be
updated or created by the &quot;guest&quot; user, using the email address of the
<tt class="docutils literal"><span class="pre">From:</span></tt> header. This only works if guest access has been granted to both
Whups, and the queue specified with the <tt class="docutils literal"><span class="pre">--queue-name</span></tt> or <tt class="docutils literal"><span class="pre">--queue-id</span></tt>
parameters.</p>
<p>Finally, you might want to to enable the setting in Whups' configuration,
below the &quot;Email Settings&quot; tab, that allows users to reply to ticket
emails. This setting removes the warning from the generated ticket emails
to <em>not</em> reply to those emails. And you should of course make sure that you
specify the correct email address here for the generated messages. It
should the address that you use for the mail pipe, or the IMAP/POP3 account
when calling <tt class="docutils literal"><span class="pre">mail-filter.php</span></tt>.</p>
</li>
</ol>
</div>
<div class="section" id="obtaining-support">
<h1><a class="toc-backref" href="#id5" name="obtaining-support">5&nbsp;&nbsp;&nbsp;Obtaining Support</a></h1>
<p>If you encounter problems with Whups, help is available!</p>
<p>The Horde Frequently Asked Questions List (FAQ), available on the Web at</p>
<blockquote>
<a class="reference" href="http://www.horde.org/faq/">http://www.horde.org/faq/</a></blockquote>
<p>The Horde Project runs a number of mailing lists, for individual applications
and for issues relating to the project as a whole. Information, archives, and
subscription information can be found at</p>
<blockquote>
<a class="reference" href="http://www.horde.org/mail/">http://www.horde.org/mail/</a></blockquote>
<p>Lastly, Horde developers, contributors and users may also be found on IRC,
on the channel #horde on the Freenode Network (irc.freenode.net).</p>
<p>Please keep in mind that Whups is free software written by volunteers.
For information on reasonable support expectations, please read</p>
<blockquote>
<a class="reference" href="http://www.horde.org/support.php">http://www.horde.org/support.php</a></blockquote>
<p>Thanks for using Whups!</p>
<p>The Whups team</p>
</div>
</div>
<hr class="docutils footer" />
<div class="footer">
<a class="reference" href="http://cvs.horde.org/co.php/whups/docs/INSTALL">View document source</a>.
Generated by <a class="reference" href="http://docutils.sourceforge.net/">Docutils</a> from <a class="reference" href="http://docutils.sourceforge.net/rst.html">reStructuredText</a> source.
</div>
